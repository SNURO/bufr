## Bottom-Up Feature Restoration - Results

This is a summary of the results we obtained from running the code in this repository.
For the results of individual seeds see [here](https://docs.google.com/spreadsheets/d/1pThAsQk9-pIZasrXfQ64rD3vgAsbXZtSx2Tb8S6lDuI/edit?usp=sharing).
Due to refactoring changes these results do not exactly match those in the paper but the same patterns emerge.

---

### EMNIST-DA

#### Summary (all data, all shifts)
|                   | All Shifts | All Shifts | Severe Shift | Severe Shift | Mild Shift | Mild Shift |
|:------------------|:-----------|:-----------|:-------------|:-------------|:-----------|:-----------|
|                   | ACC        | ECE        | ACC          | ECE          | ACC        | ECE        |
| No Corruption     | 89.3 ± 0.1 | 2.4 ± 0.1  | 89.3 ± 0.1   | 2.4 ± 0.1    | 89.3 ± 0.1 | 2.4 ± 0.1  |
| Source-only       | 29.4 ± 0.5 | 34.2 ± 3.7 | 3.7 ± 0.2    | 48.1 ± 5.9   | 79.1 ± 1.7 | 4.5 ± 1.3  |
| AdaBN             | 46.3 ± 0.8 | 30.1 ± 1.0 | 3.6 ± 0.3    | 52.5 ± 6.1   | 84.9 ± 0.4 | 4.8 ± 0.3  |
| Marg Gauss        | 51.2 ± 0.3 | 27.1 ± 0.5 | 4.8 ± 0.6    | 52.8 ± 3.7   | 85.8 ± 0.3 | 4.5 ± 0.3  |
| Full Gauss        | 68.0 ± 0.6 | 17.2 ± 0.4 | 26.0 ± 2.1   | 48.9 ± 1.7   | 85.9 ± 0.3 | 4.7 ± 0.3  |
| PL                | 49.8 ± 0.7 | 50.1 ± 0.7 | 1.8 ± 0.4    | 98.1 ± 0.4   | 83.5 ± 0.2 | 16.4 ± 0.2 |
| BNM IM            | 62.2 ± 2.0 | 37.1 ± 2.0 | 8.8 ± 1.7    | 89.6 ± 1.6   | 86.5 ± 0.1 | 13.0 ± 0.1 |
| IM                | 70.0 ± 3.2 | 30.0 ± 3.2 | 20.4 ± 12.6  | 79.6 ± 12.6  | 86.3 ± 0.1 | 13.7 ± 0.1 |
| SHOT              | 76.1 ± 0.9 | 23.9 ± 0.9 | 16.0 ± 5.9   | 84.0 ± 5.9   | 85.7 ± 0.2 | 14.3 ± 0.2 |
| FR                | 73.1 ± 1.5 | 13.8 ± 1.3 | 14.1 ± 4.2   | 59.0 ± 2.5   | 85.7 ± 0.2 | 4.9 ± 0.2  |
| BUFR              | 85.9 ± 0.1 | 4.8 ± 0.2  | 84.4 ± 0.3   | 5.8 ± 0.3    | 86.7 ± 0.2 | 4.4 ± 0.2  |
| Target Supervised | 86.6 ± 0.6 | 6.6 ± 0.4  | 85.8 ± 1.0   | 6.1 ± 0.6    | 86.3 ± 0.4 | 8.1 ± 0.5  |



#### Few-shot 

| Samples vs. Acc | 5          | 10         | 20         | 50         | 400        |
|:----------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| Marg Gauss      | 50.1 ± 0.4 | 50.6 ± 0.4 | 51.0 ± 0.3 | 51.4 ± 0.4 | 51.2 ± 0.3 |
| Full Gauss      | 55.9 ± 0.4 | 59.4 ± 0.5 | 61.6 ± 0.4 | 64.2 ± 0.5 | 68.0 ± 0.6 |
| PL              | 46.4 ± 0.6 | 46.6 ± 0.5 | 46.8 ± 0.7 | 47.4 ± 0.8 | 49.8 ± 0.7 |
| BNM IM          | 51.9 ± 0.5 | 52.9 ± 0.4 | 54.0 ± 0.4 | 56.1 ± 0.6 | 62.2 ± 2.0 |
| IM              | 48.7 ± 0.5 | 52.1 ± 0.6 | 52.1 ± 0.5 | 57.4 ± 0.8 | 70.0 ± 3.2 |
| FR              | 55.9 ± 0.5 | 59.0 ± 0.9 | 61.4 ± 1.2 | 65.4 ± 1.8 | 73.1 ± 1.5 |
| BUFR            | 71.8 ± 4.3 | 79.2 ± 2.8 | 82.8 ± 2.5 | 85.0 ± 0.1 | 85.9 ± 0.1 |


| Samples vs. ECE | 5          | 10         | 20         | 50         | 400        |
|:----------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| Marg Gauss      | 25.9 ± 0.4 | 25.8 ± 0.4 | 25.8 ± 0.3 | 26.1 ± 0.4 | 27.1 ± 0.5 |
| Full Gauss      | 23.4 ± 0.2 | 22.1 ± 0.3 | 21.1 ± 0.3 | 19.6 ± 0.4 | 17.2 ± 0.4 |
| PL              | 37.8 ± 0.5 | 39.5 ± 0.5 | 38.9 ± 0.6 | 41.8 ± 0.8 | 50.1 ± 0.7 |
| BNM IM          | 29.3 ± 0.6 | 29.8 ± 0.6 | 30.5 ± 0.4 | 31.3 ± 0.4 | 37.1 ± 2.0 |
| IM              | 33.3 ± 0.3 | 31.9 ± 0.5 | 33.2 ± 0.4 | 31.2 ± 0.7 | 30.0 ± 3.2 |
| FR              | 24.7 ± 0.4 | 22.8 ± 0.8 | 21.4 ± 1.0 | 18.8 ± 1.7 | 13.8 ± 1.3 |
| BUFR            | 13.0 ± 3.2 | 8.1 ± 2.3  | 6.2 ± 2.0  | 4.9 ± 0.1  | 4.8 ± 0.2  |

#### Per-Shift Results
<details>
  <summary>Accuracy</summary>

|               | Src-only   | AdaBN      | Marg Gauss | Full Gauss | PL         | BNM IM      | IM          | SHOT       | FR          | BUFR       |
|:--------------|:-----------|:-----------|:-----------|:-----------|:-----------|:------------|:------------|:-----------|:------------|:-----------|
| bricks        | 4.0 ± 0.4  | 5.6 ± 0.5  | 8.5 ± 0.8  | 23.1 ± 1.5 | 6.1 ± 0.9  | 13.9 ± 1.2  | 21.3 ± 12.7 | 60.6 ± 8.6 | 29.5 ± 9.1  | 83.8 ± 0.4 |
| crystals      | 18.2 ± 1.1 | 42.9 ± 1.8 | 49.9 ± 0.4 | 59.7 ± 0.9 | 47.8 ± 2.0 | 61.6 ± 1.5  | 73.6 ± 1.2  | 77.0 ± 0.3 | 77.5 ± 0.4  | 82.6 ± 0.3 |
| dotted_line   | 77.3 ± 0.2 | 81.4 ± 0.5 | 82.8 ± 0.4 | 82.9 ± 0.4 | 80.9 ± 0.6 | 86.6 ± 0.5  | 87.1 ± 0.2  | 87.0 ± 0.1 | 87.2 ± 0.2  | 88.1 ± 0.1 |
| fog           | 4.2 ± 1.3  | 69.1 ± 1.3 | 76.2 ± 2.3 | 84.5 ± 0.4 | 76.2 ± 2.6 | 86.1 ± 0.4  | 86.0 ± 0.2  | 86.2 ± 0.4 | 86.4 ± 0.1  | 88.1 ± 0.1 |
| gaussian_blur | 43.4 ± 1.8 | 65.0 ± 2.6 | 76.6 ± 0.9 | 82.1 ± 0.4 | 79.2 ± 0.6 | 83.9 ± 0.3  | 83.9 ± 0.3  | 82.6 ± 0.2 | 82.1 ± 0.4  | 85.9 ± 0.2 |
| grass         | 2.2 ± 0.1  | 6.3 ± 0.3  | 6.1 ± 1.8  | 55.4 ± 3.2 | 6.0 ± 0.8  | 15.3 ± 9.0  | 38.5 ± 36.0 | 77.9 ± 0.8 | 78.8 ± 0.5  | 84.5 ± 0.2 |
| impulse_noise | 38.8 ± 2.0 | 77.7 ± 0.6 | 81.8 ± 0.3 | 82.8 ± 0.2 | 79.9 ± 0.2 | 84.1 ± 0.2  | 84.2 ± 0.1  | 84.0 ± 0.3 | 84.3 ± 0.1  | 85.8 ± 0.1 |
| inverse       | 6.0 ± 0.5  | 7.7 ± 1.2  | 11.4 ± 1.8 | 66.5 ± 3.0 | 9.0 ± 2.8  | 38.7 ± 25.3 | 83.4 ± 0.3  | 83.2 ± 0.8 | 75.1 ± 16.9 | 88.0 ± 0.2 |
| oranges       | 25.0 ± 1.3 | 41.5 ± 1.4 | 48.9 ± 0.3 | 76.9 ± 0.4 | 42.3 ± 2.5 | 80.2 ± 0.4  | 80.9 ± 0.4  | 81.4 ± 0.2 | 81.6 ± 0.2  | 84.7 ± 0.2 |
| shot_noise    | 79.1 ± 1.7 | 84.9 ± 0.4 | 85.8 ± 0.3 | 85.9 ± 0.3 | 83.5 ± 0.2 | 86.5 ± 0.1  | 86.3 ± 0.1  | 85.7 ± 0.2 | 85.7 ± 0.2  | 86.7 ± 0.2 |
| sky           | 3.7 ± 0.2  | 3.6 ± 0.3  | 4.8 ± 0.6  | 26.0 ± 2.1 | 1.8 ± 0.4  | 8.8 ± 1.7   | 20.4 ± 12.6 | 16.0 ± 5.9 | 14.1 ± 4.2  | 84.4 ± 0.3 |
| stripe        | 14.3 ± 1.8 | 43.6 ± 5.0 | 58.8 ± 3.1 | 81.9 ± 0.5 | 61.7 ± 4.0 | 82.2 ± 0.4  | 83.4 ± 0.3  | 84.2 ± 0.2 | 83.1 ± 0.5  | 87.0 ± 0.2 |
| zigzag        | 66.3 ± 0.5 | 72.2 ± 0.3 | 74.5 ± 0.6 | 76.4 ± 0.4 | 72.8 ± 0.5 | 80.2 ± 0.8  | 81.4 ± 0.7  | 83.3 ± 0.4 | 85.1 ± 0.2  | 87.5 ± 0.1 |
| Avg           | 29.4 ± 0.5 | 46.3 ± 0.8 | 51.2 ± 0.3 | 68.0 ± 0.6 | 49.8 ± 0.7 | 62.2 ± 2.0  | 70.0 ± 3.2  | 76.1 ± 0.9 | 73.1 ± 1.5  | 85.9 ± 0.1 |
| Avg\\bgs      | 41.2 ± 0.6 | 62.7 ± 1.0 | 68.5 ± 0.4 | 80.4 ± 0.4 | 67.9 ± 0.8 | 78.5 ± 3.2  | 84.5 ± 0.1  | 84.5 ± 0.1 | 83.6 ± 2.2  | 87.2 ± 0.1 |
</details>

<details>
  <summary>ECE</summary>

|               | Src-only    | AdaBN      | Marg Gauss | Full Gauss | PL         | BNM IM      | IM          | SHOT       | FR          | BUFR      |
|:--------------|:------------|:-----------|:-----------|:-----------|:-----------|:------------|:------------|:-----------|:------------|:----------|
| bricks        | 58.0 ± 6.6  | 64.8 ± 0.6 | 62.5 ± 1.0 | 51.7 ± 1.3 | 93.7 ± 0.9 | 85.2 ± 1.2  | 78.6 ± 12.7 | 39.4 ± 8.6 | 46.4 ± 8.3  | 6.2 ± 0.4 |
| crystals      | 31.3 ± 3.2  | 27.7 ± 1.1 | 24.0 ± 0.3 | 22.3 ± 0.9 | 52.1 ± 2.0 | 37.7 ± 1.5  | 26.5 ± 1.2  | 23.0 ± 0.3 | 9.8 ± 0.6   | 7.0 ± 0.3 |
| dotted_line   | 10.5 ± 0.3  | 8.6 ± 0.5  | 7.4 ± 0.4  | 7.2 ± 0.4  | 19.0 ± 0.6 | 12.8 ± 0.5  | 12.9 ± 0.2  | 13.0 ± 0.1 | 3.8 ± 0.2   | 3.5 ± 0.1 |
| fog           | 31.1 ± 15.1 | 13.5 ± 1.1 | 9.5 ± 1.7  | 5.0 ± 0.2  | 23.6 ± 2.6 | 13.4 ± 0.4  | 14.0 ± 0.2  | 13.8 ± 0.4 | 4.2 ± 0.2   | 3.4 ± 0.2 |
| gaussian_blur | 16.7 ± 1.9  | 15.1 ± 2.3 | 9.1 ± 0.8  | 6.8 ± 0.3  | 20.6 ± 0.6 | 15.5 ± 0.3  | 16.2 ± 0.3  | 17.4 ± 0.3 | 6.9 ± 0.3   | 4.8 ± 0.3 |
| grass         | 37.8 ± 13.8 | 60.6 ± 0.5 | 61.1 ± 1.8 | 25.1 ± 2.5 | 93.9 ± 0.8 | 83.9 ± 8.9  | 61.5 ± 36.0 | 22.0 ± 0.8 | 9.0 ± 0.4   | 5.8 ± 0.2 |
| impulse_noise | 30.5 ± 2.2  | 9.2 ± 0.4  | 6.8 ± 0.3  | 6.3 ± 0.3  | 20.0 ± 0.2 | 15.3 ± 0.2  | 15.8 ± 0.2  | 16.0 ± 0.3 | 5.4 ± 0.1   | 4.8 ± 0.1 |
| inverse       | 63.7 ± 4.3  | 61.0 ± 1.3 | 57.0 ± 2.4 | 16.4 ± 2.1 | 90.9 ± 2.8 | 60.5 ± 25.1 | 16.6 ± 0.3  | 16.9 ± 0.8 | 11.3 ± 12.8 | 3.6 ± 0.2 |
| oranges       | 29.1 ± 4.4  | 23.0 ± 1.3 | 20.7 ± 1.6 | 10.2 ± 0.5 | 57.6 ± 2.5 | 19.3 ± 0.4  | 19.1 ± 0.4  | 18.6 ± 0.2 | 7.3 ± 0.2   | 5.7 ± 0.2 |
| shot_noise    | 4.5 ± 1.3   | 4.8 ± 0.3  | 4.5 ± 0.3  | 4.7 ± 0.3  | 16.4 ± 0.2 | 13.0 ± 0.1  | 13.7 ± 0.1  | 14.3 ± 0.2 | 4.9 ± 0.2   | 4.4 ± 0.2 |
| sky           | 48.1 ± 5.9  | 52.5 ± 6.1 | 52.8 ± 3.7 | 48.9 ± 1.7 | 98.1 ± 0.4 | 89.6 ± 1.6  | 79.6 ± 12.6 | 84.0 ± 5.9 | 59.0 ± 2.5  | 5.8 ± 0.3 |
| stripe        | 64.3 ± 3.0  | 34.2 ± 3.9 | 23.4 ± 2.3 | 6.9 ± 0.5  | 38.2 ± 4.0 | 17.3 ± 0.4  | 16.6 ± 0.3  | 15.8 ± 0.3 | 6.2 ± 0.4   | 4.1 ± 0.2 |
| zigzag        | 18.7 ± 0.5  | 15.9 ± 0.3 | 14.0 ± 0.5 | 12.4 ± 0.3 | 27.1 ± 0.5 | 19.2 ± 0.8  | 18.6 ± 0.7  | 16.7 ± 0.4 | 5.3 ± 0.2   | 3.8 ± 0.1 |
| Avg           | 34.2 ± 3.7  | 30.1 ± 1.0 | 27.1 ± 0.5 | 17.2 ± 0.4 | 50.1 ± 0.7 | 37.1 ± 2.0  | 30.0 ± 3.2  | 23.9 ± 0.9 | 13.8 ± 1.3  | 4.8 ± 0.2 |
| Avg\\bgs      | 30.0 ± 2.2  | 20.3 ± 0.9 | 16.5 ± 0.4 | 8.2 ± 0.3  | 32.0 ± 0.9 | 20.9 ± 3.2  | 15.5 ± 0.1  | 15.5 ± 0.1 | 6.0 ± 1.7   | 4.1 ± 0.1 |
</details>

---

### CIFAR-10-C

#### Summary (all shifts, all data)
|                   | Acc        | ECE        |
|:------------------|:-----------|:-----------|
| No Corruption     | 95.5 ± 0.1 | 2.4 ± 0.1  |
| Source-only       | 58.1 ± 0.4 | 28.7 ± 0.4 |
| AdaBN             | 80.6 ± 0.3 | 11.3 ± 0.1 |
| PL                | 82.4 ± 0.3 | 17.5 ± 0.3 |
| IM                | 85.4 ± 0.1 | 14.6 ± 0.1 |
| TENT              | 86.6 ± 0.2 | 13.2 ± 0.2 |
| FR                | 87.0 ± 0.2 | 11.3 ± 0.1 |
| BUFR              | 89.6 ± 0.1 | 9.8 ± 0.1  |
| Target Supervised | 89.0 ± 0.9 | 6.6 ± 0.6  |

#### Summary (all shifts, all data) - Online
|       | Acc        | ECE        |
|:------|:-----------|:-----------|
| AdaBN | 80.4 ± 0.3 | 11.2 ± 0.1 |
| IM    | 83.2 ± 0.2 | 11.1 ± 0.1 |
| TENT  | 81.9 ± 0.3 | 11.6 ± 0.1 |
| FR    | 86.1 ± 0.1 | 9.6 ± 0.1  |

#### Per-Shift Results
<details>
  <summary>Accuracy</summary>
  
|                   | Src-only   | AdaBN      | PL         | IM         | TENT       | FR         | BUFR       |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 91.6 ± 0.1 | 91.6 ± 0.4 | 92.1 ± 0.4 | 92.9 ± 0.1 | 93.4 ± 0.3 | 93.1 ± 0.1 | 93.6 ± 0.3 |
| contrast          | 34.8 ± 2.8 | 87.6 ± 0.4 | 84.8 ± 5.4 | 91.7 ± 0.4 | 91.0 ± 1.7 | 90.8 ± 0.9 | 93.2 ± 0.2 |
| defocus_blur      | 55.0 ± 2.7 | 89.1 ± 0.3 | 89.6 ± 0.2 | 90.7 ± 0.3 | 91.3 ± 0.3 | 91.1 ± 0.3 | 91.7 ± 0.2 |
| elastic_transform | 77.1 ± 0.9 | 77.8 ± 0.4 | 78.8 ± 0.8 | 81.2 ± 0.5 | 82.0 ± 0.5 | 82.6 ± 0.3 | 83.7 ± 0.2 |
| fog               | 75.1 ± 1.2 | 86.2 ± 0.4 | 86.8 ± 0.5 | 88.6 ± 0.3 | 89.8 ± 0.6 | 89.9 ± 0.4 | 91.8 ± 0.2 |
| frost             | 66.9 ± 1.2 | 81.4 ± 0.3 | 82.7 ± 1.0 | 85.7 ± 0.8 | 87.5 ± 0.1 | 87.5 ± 0.5 | 89.8 ± 0.4 |
| gaussian_blur     | 36.7 ± 1.6 | 88.6 ± 0.6 | 89.3 ± 0.9 | 91.0 ± 0.3 | 91.7 ± 0.1 | 91.7 ± 0.3 | 92.6 ± 0.2 |
| gaussian_noise    | 25.4 ± 1.2 | 68.5 ± 0.9 | 73.6 ± 0.9 | 78.3 ± 0.4 | 80.9 ± 0.5 | 81.7 ± 0.3 | 85.7 ± 0.2 |
| glass_blur        | 51.3 ± 1.2 | 67.0 ± 0.5 | 69.5 ± 1.3 | 73.9 ± 0.5 | 74.9 ± 0.4 | 76.3 ± 0.2 | 80.4 ± 0.7 |
| impulse_noise     | 21.0 ± 1.9 | 62.3 ± 0.4 | 67.2 ± 1.1 | 72.6 ± 0.4 | 75.0 ± 0.6 | 76.4 ± 0.4 | 89.3 ± 1.4 |
| jpeg_compression  | 73.8 ± 0.5 | 73.5 ± 0.5 | 76.8 ± 0.6 | 80.7 ± 0.5 | 82.4 ± 0.5 | 83.2 ± 0.5 | 85.6 ± 0.3 |
| motion_blur       | 66.9 ± 0.4 | 87.6 ± 0.2 | 88.2 ± 0.5 | 89.3 ± 0.2 | 90.2 ± 0.3 | 90.3 ± 0.3 | 91.0 ± 0.1 |
| pixelate          | 49.8 ± 1.6 | 80.6 ± 0.7 | 82.4 ± 0.6 | 85.8 ± 0.3 | 87.9 ± 0.3 | 87.9 ± 0.3 | 90.4 ± 0.2 |
| saturate          | 89.7 ± 0.2 | 92.3 ± 0.3 | 92.7 ± 0.2 | 93.2 ± 0.2 | 93.6 ± 0.1 | 93.3 ± 0.3 | 93.8 ± 0.2 |
| shot_noise        | 32.2 ± 1.4 | 71.4 ± 0.6 | 76.6 ± 0.9 | 81.0 ± 0.5 | 83.2 ± 0.3 | 83.7 ± 0.5 | 87.1 ± 0.2 |
| snow              | 78.1 ± 0.4 | 83.0 ± 0.3 | 84.0 ± 0.2 | 86.2 ± 0.2 | 87.7 ± 0.4 | 87.8 ± 0.4 | 90.0 ± 0.2 |
| spatter           | 75.9 ± 1.2 | 83.9 ± 0.5 | 85.7 ± 0.5 | 88.2 ± 0.2 | 88.6 ± 0.2 | 89.6 ± 0.3 | 93.1 ± 0.2 |
| speckle_noise     | 38.1 ± 1.2 | 70.3 ± 0.6 | 75.9 ± 0.9 | 81.3 ± 0.3 | 83.3 ± 0.4 | 84.0 ± 0.5 | 87.6 ± 0.2 |
| zoom_blur         | 63.7 ± 1.3 | 88.3 ± 0.2 | 88.9 ± 0.4 | 90.5 ± 0.3 | 91.2 ± 0.2 | 91.4 ± 0.2 | 91.9 ± 0.3 |
| Avg               | 58.1 ± 0.4 | 80.6 ± 0.3 | 82.4 ± 0.3 | 85.4 ± 0.1 | 86.6 ± 0.2 | 87.0 ± 0.2 | 89.6 ± 0.1 |
</details>

<details>
  <summary>ECE</summary>
  
|                   | Src-only   | AdaBN      | PL         | IM         | TENT       | FR         | BUFR       |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 4.5 ± 0.2  | 4.1 ± 0.3  | 7.8 ± 0.3  | 7.1 ± 0.1  | 6.6 ± 0.3  | 5.8 ± 0.1  | 5.9 ± 0.3  |
| contrast          | 39.5 ± 4.9 | 5.7 ± 0.3  | 15.0 ± 5.3 | 8.3 ± 0.4  | 8.9 ± 1.6  | 6.3 ± 0.3  | 6.3 ± 0.3  |
| defocus_blur      | 28.7 ± 3.5 | 5.8 ± 0.2  | 10.4 ± 0.2 | 9.3 ± 0.3  | 8.6 ± 0.3  | 7.7 ± 0.3  | 7.9 ± 0.2  |
| elastic_transform | 13.0 ± 0.7 | 13.0 ± 0.4 | 21.2 ± 0.8 | 18.8 ± 0.5 | 17.8 ± 0.5 | 15.3 ± 0.3 | 15.6 ± 0.2 |
| fog               | 15.5 ± 1.1 | 7.5 ± 0.2  | 13.1 ± 0.5 | 11.4 ± 0.3 | 10.1 ± 0.5 | 8.6 ± 0.2  | 7.6 ± 0.2  |
| frost             | 21.2 ± 1.0 | 10.2 ± 0.3 | 17.2 ± 1.0 | 14.3 ± 0.8 | 12.3 ± 0.1 | 10.3 ± 0.4 | 9.6 ± 0.4  |
| gaussian_blur     | 43.8 ± 2.7 | 6.0 ± 0.3  | 10.6 ± 0.9 | 8.9 ± 0.3  | 8.3 ± 0.1  | 7.1 ± 0.3  | 6.9 ± 0.2  |
| gaussian_noise    | 58.5 ± 1.5 | 19.2 ± 0.7 | 26.4 ± 0.9 | 21.7 ± 0.4 | 18.9 ± 0.5 | 16.2 ± 0.4 | 13.7 ± 0.2 |
| glass_blur        | 31.9 ± 0.8 | 20.8 ± 0.2 | 30.4 ± 1.3 | 26.0 ± 0.5 | 24.8 ± 0.4 | 21.7 ± 0.3 | 18.9 ± 0.7 |
| impulse_noise     | 59.7 ± 2.3 | 23.3 ± 0.4 | 32.7 ± 1.1 | 27.4 ± 0.4 | 24.8 ± 0.5 | 21.2 ± 0.5 | 10.1 ± 1.4 |
| jpeg_compression  | 15.7 ± 0.4 | 16.0 ± 0.5 | 23.2 ± 0.6 | 19.2 ± 0.5 | 17.4 ± 0.5 | 15.0 ± 0.4 | 13.7 ± 0.3 |
| motion_blur       | 21.2 ± 0.6 | 6.5 ± 0.1  | 11.8 ± 0.5 | 10.7 ± 0.2 | 9.7 ± 0.3  | 8.2 ± 0.3  | 8.5 ± 0.2  |
| pixelate          | 36.5 ± 2.0 | 11.2 ± 0.4 | 17.5 ± 0.6 | 14.1 ± 0.3 | 11.9 ± 0.3 | 10.6 ± 0.3 | 9.1 ± 0.3  |
| saturate          | 5.8 ± 0.1  | 4.0 ± 0.2  | 7.2 ± 0.1  | 6.8 ± 0.2  | 6.4 ± 0.1  | 5.6 ± 0.3  | 5.7 ± 0.2  |
| shot_noise        | 51.0 ± 1.1 | 17.4 ± 0.4 | 23.3 ± 0.8 | 19.0 ± 0.4 | 16.7 ± 0.3 | 14.3 ± 0.5 | 12.2 ± 0.2 |
| snow              | 13.4 ± 0.3 | 9.7 ± 0.2  | 16.0 ± 0.2 | 13.8 ± 0.2 | 12.1 ± 0.4 | 10.3 ± 0.2 | 9.5 ± 0.2  |
| spatter           | 16.3 ± 1.1 | 9.2 ± 0.5  | 14.2 ± 0.5 | 11.8 ± 0.2 | 11.3 ± 0.2 | 8.9 ± 0.4  | 6.4 ± 0.1  |
| speckle_noise     | 45.1 ± 0.7 | 18.1 ± 0.5 | 24.0 ± 1.0 | 18.7 ± 0.3 | 16.5 ± 0.4 | 14.1 ± 0.4 | 11.7 ± 0.2 |
| zoom_blur         | 23.0 ± 1.3 | 6.2 ± 0.3  | 11.1 ± 0.5 | 9.5 ± 0.3  | 8.6 ± 0.2  | 7.4 ± 0.1  | 7.6 ± 0.2  |
| Avg               | 28.7 ± 0.4 | 11.3 ± 0.1 | 17.5 ± 0.3 | 14.6 ± 0.1 | 13.2 ± 0.2 | 11.3 ± 0.1 | 9.8 ± 0.1  |
</details>

#### Per-Shift Results - Online
<details>
  <summary>Accuracy</summary>

|                   | Src-only   | AdaBN      | IM         | TENT       | FR         |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 91.6 ± 0.1 | 91.5 ± 0.3 | 92.2 ± 0.2 | 92.0 ± 0.3 | 93.0 ± 0.2 |
| contrast          | 34.8 ± 2.8 | 87.5 ± 0.3 | 88.3 ± 0.2 | 88.1 ± 0.1 | 90.5 ± 0.2 |
| defocus_blur      | 55.0 ± 2.7 | 89.0 ± 0.3 | 89.9 ± 0.2 | 89.5 ± 0.3 | 90.9 ± 0.3 |
| elastic_transform | 77.1 ± 0.9 | 77.5 ± 0.4 | 79.6 ± 0.4 | 78.5 ± 0.4 | 81.5 ± 0.3 |
| fog               | 75.1 ± 1.2 | 85.9 ± 0.5 | 87.3 ± 0.4 | 86.8 ± 0.4 | 89.4 ± 0.3 |
| frost             | 66.9 ± 1.2 | 81.3 ± 0.3 | 83.5 ± 0.3 | 82.6 ± 0.2 | 86.5 ± 0.5 |
| gaussian_blur     | 36.7 ± 1.6 | 88.5 ± 0.4 | 89.7 ± 0.4 | 89.1 ± 0.3 | 91.3 ± 0.3 |
| gaussian_noise    | 25.4 ± 1.2 | 68.3 ± 1.0 | 74.3 ± 0.6 | 71.8 ± 0.7 | 80.2 ± 0.4 |
| glass_blur        | 51.3 ± 1.2 | 66.6 ± 0.7 | 70.5 ± 0.5 | 68.3 ± 0.4 | 74.2 ± 0.7 |
| impulse_noise     | 21.0 ± 1.9 | 61.9 ± 0.7 | 68.3 ± 0.7 | 65.3 ± 0.7 | 74.5 ± 0.4 |
| jpeg_compression  | 73.8 ± 0.5 | 73.2 ± 0.4 | 77.5 ± 0.4 | 75.3 ± 0.3 | 81.8 ± 0.4 |
| motion_blur       | 66.9 ± 0.4 | 87.4 ± 0.4 | 88.3 ± 0.3 | 87.9 ± 0.3 | 89.7 ± 0.2 |
| pixelate          | 49.8 ± 1.6 | 80.3 ± 0.6 | 83.5 ± 0.3 | 82.0 ± 0.5 | 86.8 ± 0.3 |
| saturate          | 89.7 ± 0.2 | 92.1 ± 0.3 | 92.9 ± 0.2 | 92.5 ± 0.3 | 93.2 ± 0.1 |
| shot_noise        | 32.2 ± 1.4 | 71.2 ± 0.6 | 77.2 ± 0.4 | 74.7 ± 0.6 | 82.4 ± 0.6 |
| snow              | 78.1 ± 0.4 | 82.9 ± 0.5 | 84.8 ± 0.4 | 84.0 ± 0.4 | 87.1 ± 0.2 |
| spatter           | 75.9 ± 1.2 | 83.8 ± 0.3 | 86.3 ± 0.5 | 85.0 ± 0.4 | 89.1 ± 0.2 |
| speckle_noise     | 38.1 ± 1.2 | 70.1 ± 0.6 | 76.6 ± 0.6 | 74.0 ± 0.8 | 82.2 ± 0.3 |
| zoom_blur         | 63.7 ± 1.3 | 88.2 ± 0.2 | 89.5 ± 0.2 | 88.8 ± 0.2 | 90.8 ± 0.2 |
| Avg               | 58.1 ± 0.4 | 80.4 ± 0.3 | 83.2 ± 0.2 | 81.9 ± 0.3 | 86.1 ± 0.1 |
</details>

<details>
  <summary>ECE</summary>

|                   | Src-only   | AdaBN      | IM         | TENT       | FR         |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 4.5 ± 0.2  | 4.0 ± 0.3  | 5.0 ± 0.1  | 5.1 ± 0.1  | 4.8 ± 0.1  |
| contrast          | 39.5 ± 4.9 | 5.6 ± 0.3  | 8.4 ± 0.4  | 7.8 ± 0.6  | 5.7 ± 0.2  |
| defocus_blur      | 28.7 ± 3.5 | 5.8 ± 0.2  | 6.8 ± 0.2  | 6.8 ± 0.2  | 6.3 ± 0.3  |
| elastic_transform | 13.0 ± 0.7 | 12.9 ± 0.3 | 13.2 ± 0.3 | 13.5 ± 0.3 | 12.7 ± 0.2 |
| fog               | 15.5 ± 1.1 | 7.4 ± 0.1  | 8.3 ± 0.2  | 8.3 ± 0.3  | 7.0 ± 0.2  |
| frost             | 21.2 ± 1.0 | 10.1 ± 0.3 | 10.6 ± 0.4 | 10.7 ± 0.2 | 8.9 ± 0.6  |
| gaussian_blur     | 43.8 ± 2.7 | 6.1 ± 0.3  | 6.7 ± 0.3  | 6.9 ± 0.3  | 6.0 ± 0.2  |
| gaussian_noise    | 58.5 ± 1.5 | 19.0 ± 0.8 | 17.2 ± 0.4 | 18.2 ± 0.5 | 13.7 ± 0.4 |
| glass_blur        | 31.9 ± 0.8 | 20.7 ± 0.3 | 19.9 ± 0.4 | 20.9 ± 0.3 | 18.6 ± 0.7 |
| impulse_noise     | 59.7 ± 2.3 | 23.1 ± 0.3 | 21.0 ± 0.6 | 22.4 ± 0.5 | 18.1 ± 0.4 |
| jpeg_compression  | 15.7 ± 0.4 | 16.0 ± 0.5 | 14.8 ± 0.4 | 15.8 ± 0.4 | 12.8 ± 0.3 |
| motion_blur       | 21.2 ± 0.6 | 6.5 ± 0.0  | 7.5 ± 0.1  | 7.5 ± 0.2  | 6.9 ± 0.2  |
| pixelate          | 36.5 ± 2.0 | 11.1 ± 0.3 | 10.8 ± 0.3 | 11.4 ± 0.3 | 8.9 ± 0.1  |
| saturate          | 5.8 ± 0.1  | 4.0 ± 0.1  | 4.8 ± 0.2  | 5.0 ± 0.2  | 4.7 ± 0.1  |
| shot_noise        | 51.0 ± 1.1 | 17.2 ± 0.4 | 14.9 ± 0.3 | 16.2 ± 0.4 | 12.0 ± 0.4 |
| snow              | 13.4 ± 0.3 | 9.5 ± 0.2  | 9.9 ± 0.2  | 10.1 ± 0.2 | 8.7 ± 0.2  |
| spatter           | 16.3 ± 1.1 | 9.1 ± 0.4  | 9.0 ± 0.3  | 9.7 ± 0.4  | 7.5 ± 0.3  |
| speckle_noise     | 45.1 ± 0.7 | 17.9 ± 0.5 | 15.3 ± 0.5 | 16.6 ± 0.6 | 12.2 ± 0.3 |
| zoom_blur         | 23.0 ± 1.3 | 6.2 ± 0.2  | 6.7 ± 0.1  | 7.0 ± 0.2  | 6.3 ± 0.2  |
| Avg               | 28.7 ± 0.4 | 11.2 ± 0.1 | 11.1 ± 0.1 | 11.6 ± 0.1 | 9.6 ± 0.1  |
</details>

---

### CIFAR-100-C

#### Summary (all shifts, all data)
|                   | Acc        | ECE        |
|:------------------|:-----------|:-----------|
| No Corruption     | 76.6 ± 0.1 | 4.8 ± 0.3  |
| Source-only       | 36.5 ± 0.2 | 18.8 ± 0.8 |
| AdaBN             | 56.8 ± 0.2 | 12.2 ± 0.2 |
| PL                | 62.0 ± 0.2 | 37.9 ± 0.2 |
| IM                | 66.9 ± 0.1 | 33.1 ± 0.1 |
| TENT              | 65.0 ± 0.1 | 31.2 ± 0.1 |
| FR                | 65.4 ± 0.2 | 15.8 ± 0.1 |
| BUFR              | 68.6 ± 0.2 | 14.4 ± 0.1 |
| Target Supervised | 68.6 ± 0.7 | 8.8 ± 0.8  |

#### Summary (all shifts, all data) - Online
|       | Acc        | ECE        |
|:------|:-----------|:-----------|
| AdaBN | 56.4 ± 0.2 | 12.3 ± 0.2 |
| IM    | 62.3 ± 0.1 | 13.9 ± 0.1 |
| TENT  | 63.1 ± 0.1 | 14.4 ± 0.1 |
| FR    | 62.7 ± 0.2 | 13.6 ± 0.1 |

#### Per-Shift Results
<details>
  <summary>Accuracy</summary>
  
|                   | Src-only   | AdaBN      | PL         | IM         | TENT       | FR         | BUFR       |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 63.2 ± 0.3 | 65.9 ± 0.4 | 69.4 ± 0.6 | 72.6 ± 0.2 | 72.1 ± 0.2 | 71.7 ± 0.2 | 73.5 ± 0.2 |
| contrast          | 14.4 ± 0.8 | 61.4 ± 0.5 | 60.5 ± 0.8 | 70.0 ± 0.3 | 54.1 ± 1.0 | 67.6 ± 0.5 | 72.4 ± 0.9 |
| defocus_blur      | 35.0 ± 0.6 | 66.0 ± 0.3 | 68.9 ± 0.7 | 71.7 ± 0.2 | 70.7 ± 0.2 | 70.9 ± 0.3 | 72.0 ± 0.2 |
| elastic_transform | 58.1 ± 0.4 | 60.4 ± 0.3 | 63.4 ± 0.7 | 66.9 ± 0.2 | 65.5 ± 0.2 | 65.3 ± 0.4 | 66.7 ± 0.3 |
| fog               | 37.2 ± 0.8 | 55.6 ± 0.2 | 60.9 ± 0.2 | 66.9 ± 0.4 | 66.7 ± 0.4 | 65.1 ± 0.4 | 69.8 ± 0.3 |
| frost             | 41.3 ± 1.2 | 55.6 ± 0.6 | 60.1 ± 1.1 | 65.3 ± 0.5 | 65.3 ± 0.3 | 63.2 ± 0.8 | 67.1 ± 0.6 |
| gaussian_blur     | 27.4 ± 0.9 | 64.7 ± 0.4 | 69.1 ± 0.7 | 71.7 ± 0.2 | 70.8 ± 0.3 | 71.2 ± 0.5 | 72.7 ± 0.2 |
| gaussian_noise    | 12.2 ± 0.6 | 43.8 ± 0.7 | 53.4 ± 0.6 | 59.9 ± 0.3 | 58.2 ± 0.3 | 57.5 ± 0.4 | 62.2 ± 0.4 |
| glass_blur        | 45.3 ± 0.8 | 53.4 ± 0.3 | 57.4 ± 1.0 | 62.2 ± 0.2 | 60.7 ± 0.5 | 60.5 ± 0.5 | 63.0 ± 0.3 |
| impulse_noise     | 7.6 ± 1.6  | 41.0 ± 0.7 | 49.5 ± 1.2 | 57.6 ± 0.9 | 55.1 ± 0.6 | 54.5 ± 0.8 | 66.8 ± 0.7 |
| jpeg_compression  | 48.7 ± 0.6 | 49.7 ± 0.6 | 54.9 ± 0.4 | 61.1 ± 0.4 | 60.1 ± 0.6 | 59.2 ± 0.6 | 62.2 ± 0.2 |
| motion_blur       | 45.0 ± 0.4 | 63.4 ± 0.5 | 66.1 ± 0.4 | 69.6 ± 0.3 | 68.7 ± 0.2 | 68.5 ± 0.1 | 70.5 ± 0.3 |
| pixelate          | 24.6 ± 1.9 | 60.2 ± 0.6 | 65.6 ± 0.6 | 69.9 ± 0.5 | 69.3 ± 0.6 | 68.4 ± 0.7 | 70.9 ± 0.5 |
| saturate          | 55.5 ± 0.6 | 65.7 ± 0.5 | 69.2 ± 0.9 | 72.3 ± 0.2 | 71.0 ± 0.2 | 72.2 ± 0.2 | 72.8 ± 0.3 |
| shot_noise        | 14.0 ± 0.5 | 44.7 ± 0.7 | 55.1 ± 1.1 | 61.4 ± 0.3 | 59.7 ± 0.5 | 59.4 ± 0.6 | 63.7 ± 0.7 |
| snow              | 49.2 ± 0.6 | 53.5 ± 0.5 | 59.1 ± 1.0 | 64.9 ± 0.4 | 64.9 ± 0.6 | 63.5 ± 0.4 | 68.0 ± 0.3 |
| spatter           | 55.2 ± 0.8 | 65.0 ± 0.3 | 72.1 ± 0.3 | 73.9 ± 0.2 | 72.5 ± 0.5 | 73.7 ± 0.3 | 74.4 ± 0.2 |
| speckle_noise     | 15.4 ± 0.7 | 43.2 ± 0.5 | 54.8 ± 1.5 | 61.3 ± 0.5 | 58.6 ± 0.5 | 59.3 ± 0.5 | 63.9 ± 0.3 |
| zoom_blur         | 44.6 ± 0.8 | 66.0 ± 0.4 | 69.0 ± 0.5 | 71.9 ± 0.2 | 70.6 ± 0.2 | 71.2 ± 0.5 | 71.4 ± 0.3 |
| Avg               | 36.5 ± 0.2 | 56.8 ± 0.2 | 62.0 ± 0.2 | 66.9 ± 0.1 | 65.0 ± 0.1 | 65.4 ± 0.2 | 68.6 ± 0.2 |
</details>

<details>
  <summary>ECE</summary>

|                   | Src-only   | AdaBN      | PL         | IM         | TENT       | FR         | BUFR       |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 6.1 ± 0.4  | 9.4 ± 0.2  | 30.5 ± 0.6 | 27.4 ± 0.2 | 24.6 ± 0.3 | 12.8 ± 0.3 | 11.9 ± 0.2 |
| contrast          | 37.3 ± 1.9 | 11.4 ± 0.5 | 39.3 ± 0.8 | 29.9 ± 0.3 | 43.4 ± 1.1 | 14.1 ± 0.4 | 12.4 ± 0.4 |
| defocus_blur      | 15.3 ± 1.2 | 9.1 ± 0.2  | 31.0 ± 0.7 | 28.3 ± 0.1 | 26.0 ± 0.2 | 13.4 ± 0.1 | 12.7 ± 0.4 |
| elastic_transform | 8.1 ± 0.5  | 10.7 ± 0.3 | 36.5 ± 0.7 | 33.0 ± 0.2 | 30.4 ± 0.3 | 15.7 ± 0.2 | 15.3 ± 0.3 |
| fog               | 20.7 ± 1.1 | 12.1 ± 0.2 | 39.0 ± 0.2 | 33.1 ± 0.4 | 29.7 ± 0.4 | 15.8 ± 0.1 | 13.9 ± 0.2 |
| frost             | 13.7 ± 1.1 | 13.0 ± 0.3 | 39.7 ± 1.1 | 34.7 ± 0.5 | 30.8 ± 0.3 | 16.1 ± 0.2 | 15.2 ± 0.5 |
| gaussian_blur     | 19.4 ± 1.8 | 9.5 ± 0.3  | 30.8 ± 0.7 | 28.3 ± 0.2 | 25.8 ± 0.3 | 13.2 ± 0.2 | 12.4 ± 0.2 |
| gaussian_noise    | 38.6 ± 4.3 | 16.6 ± 0.5 | 46.5 ± 0.6 | 40.1 ± 0.3 | 37.3 ± 0.2 | 19.3 ± 0.3 | 17.7 ± 0.1 |
| glass_blur        | 15.1 ± 0.8 | 13.6 ± 0.3 | 42.5 ± 1.0 | 37.7 ± 0.2 | 34.9 ± 0.5 | 18.0 ± 0.4 | 17.5 ± 0.4 |
| impulse_noise     | 33.7 ± 6.1 | 17.0 ± 0.7 | 50.4 ± 1.2 | 42.4 ± 0.9 | 40.2 ± 0.7 | 20.6 ± 0.5 | 15.6 ± 0.6 |
| jpeg_compression  | 7.7 ± 0.4  | 14.7 ± 0.5 | 45.0 ± 0.4 | 38.8 ± 0.4 | 35.4 ± 0.6 | 19.2 ± 0.4 | 17.8 ± 0.4 |
| motion_blur       | 12.3 ± 0.4 | 10.3 ± 0.4 | 33.8 ± 0.4 | 30.4 ± 0.3 | 27.8 ± 0.3 | 14.5 ± 0.2 | 13.5 ± 0.5 |
| pixelate          | 23.6 ± 1.2 | 10.9 ± 0.3 | 34.3 ± 0.7 | 30.1 ± 0.5 | 27.2 ± 0.6 | 14.1 ± 0.4 | 13.1 ± 0.4 |
| saturate          | 8.7 ± 0.7  | 9.3 ± 0.3  | 30.7 ± 0.9 | 27.7 ± 0.3 | 25.6 ± 0.3 | 12.9 ± 0.2 | 12.2 ± 0.3 |
| shot_noise        | 37.8 ± 4.2 | 16.2 ± 0.6 | 44.8 ± 1.1 | 38.6 ± 0.3 | 36.0 ± 0.6 | 18.8 ± 0.5 | 16.7 ± 0.3 |
| snow              | 8.3 ± 0.4  | 13.9 ± 0.5 | 40.8 ± 0.9 | 35.0 ± 0.3 | 31.1 ± 0.6 | 16.9 ± 0.2 | 14.9 ± 0.3 |
| spatter           | 6.5 ± 0.9  | 9.4 ± 0.2  | 27.8 ± 0.3 | 26.1 ± 0.2 | 24.3 ± 0.5 | 12.2 ± 0.3 | 11.1 ± 0.3 |
| speckle_noise     | 34.9 ± 4.8 | 16.7 ± 0.6 | 45.1 ± 1.5 | 38.7 ± 0.5 | 37.0 ± 0.4 | 18.8 ± 0.2 | 16.9 ± 0.5 |
| zoom_blur         | 10.2 ± 1.3 | 8.9 ± 0.2  | 30.9 ± 0.5 | 28.1 ± 0.2 | 25.9 ± 0.2 | 13.1 ± 0.2 | 13.0 ± 0.2 |
| Avg               | 18.8 ± 0.8 | 12.2 ± 0.2 | 37.9 ± 0.2 | 33.1 ± 0.1 | 31.2 ± 0.1 | 15.8 ± 0.1 | 14.4 ± 0.1 |
</details>

#### Per-Shift Results - Online
<details>
  <summary>Accuracy</summary>
  
|                   | Src-only   | AdaBN      | IM         | TENT       | FR         |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 63.2 ± 0.3 | 65.4 ± 0.4 | 69.3 ± 0.5 | 70.0 ± 0.1 | 69.1 ± 0.5 |
| contrast          | 14.4 ± 0.8 | 61.2 ± 0.5 | 64.9 ± 0.4 | 66.6 ± 0.3 | 64.1 ± 0.4 |
| defocus_blur      | 35.0 ± 0.6 | 65.4 ± 0.3 | 69.1 ± 0.3 | 69.3 ± 0.5 | 68.9 ± 0.4 |
| elastic_transform | 58.1 ± 0.4 | 59.9 ± 0.4 | 63.6 ± 0.5 | 64.0 ± 0.1 | 63.6 ± 0.3 |
| fog               | 37.2 ± 0.8 | 55.3 ± 0.3 | 61.2 ± 0.3 | 62.9 ± 0.5 | 61.9 ± 0.2 |
| frost             | 41.3 ± 1.2 | 55.3 ± 0.5 | 60.0 ± 0.5 | 62.0 ± 0.6 | 60.5 ± 0.7 |
| gaussian_blur     | 27.4 ± 0.9 | 64.3 ± 0.3 | 68.9 ± 0.2 | 69.2 ± 0.5 | 68.7 ± 0.4 |
| gaussian_noise    | 12.2 ± 0.6 | 43.7 ± 0.6 | 53.0 ± 0.5 | 54.4 ± 0.2 | 54.7 ± 0.3 |
| glass_blur        | 45.3 ± 0.8 | 53.1 ± 0.2 | 58.2 ± 0.3 | 58.5 ± 0.6 | 58.1 ± 0.6 |
| impulse_noise     | 7.6 ± 1.6  | 40.6 ± 0.6 | 50.1 ± 0.4 | 50.1 ± 0.7 | 51.4 ± 0.3 |
| jpeg_compression  | 48.7 ± 0.6 | 49.5 ± 0.6 | 55.9 ± 0.4 | 57.1 ± 0.4 | 56.4 ± 0.5 |
| motion_blur       | 45.0 ± 0.4 | 63.0 ± 0.1 | 66.5 ± 0.3 | 66.8 ± 0.3 | 66.2 ± 0.4 |
| pixelate          | 24.6 ± 1.9 | 59.8 ± 0.7 | 65.5 ± 0.4 | 67.2 ± 0.2 | 65.8 ± 0.6 |
| saturate          | 55.5 ± 0.6 | 65.4 ± 0.6 | 69.6 ± 0.3 | 69.5 ± 0.5 | 69.6 ± 0.5 |
| shot_noise        | 14.0 ± 0.5 | 44.3 ± 0.6 | 54.5 ± 0.5 | 55.7 ± 0.6 | 56.2 ± 0.6 |
| snow              | 49.2 ± 0.6 | 53.2 ± 0.4 | 59.6 ± 0.4 | 61.7 ± 0.3 | 60.2 ± 0.3 |
| spatter           | 55.2 ± 0.8 | 64.7 ± 0.2 | 71.3 ± 0.2 | 70.5 ± 0.4 | 71.9 ± 0.3 |
| speckle_noise     | 15.4 ± 0.7 | 42.9 ± 0.5 | 54.0 ± 0.6 | 54.1 ± 0.7 | 55.4 ± 0.3 |
| zoom_blur         | 44.6 ± 0.8 | 65.6 ± 0.1 | 69.3 ± 0.2 | 69.3 ± 0.2 | 69.1 ± 0.3 |
| Avg               | 36.5 ± 0.2 | 56.4 ± 0.2 | 62.3 ± 0.1 | 63.1 ± 0.1 | 62.7 ± 0.2 |
</details>

<details>
  <summary>ECE</summary>
  
|                   | Src-only   | AdaBN      | IM         | TENT       | FR         |
|:------------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness        | 6.1 ± 0.4  | 9.4 ± 0.2  | 11.7 ± 0.4 | 11.8 ± 0.1 | 11.1 ± 0.1 |
| contrast          | 37.3 ± 1.9 | 11.3 ± 0.4 | 14.7 ± 0.5 | 14.4 ± 0.5 | 12.7 ± 0.2 |
| defocus_blur      | 15.3 ± 1.2 | 9.2 ± 0.3  | 11.2 ± 0.2 | 11.8 ± 0.4 | 11.3 ± 0.3 |
| elastic_transform | 8.1 ± 0.5  | 10.7 ± 0.4 | 13.0 ± 0.5 | 13.5 ± 0.2 | 12.9 ± 0.3 |
| fog               | 20.7 ± 1.1 | 12.1 ± 0.3 | 13.9 ± 0.4 | 14.4 ± 0.4 | 13.7 ± 0.2 |
| frost             | 13.7 ± 1.1 | 13.0 ± 0.4 | 14.8 ± 0.3 | 14.7 ± 0.5 | 14.0 ± 0.4 |
| gaussian_blur     | 19.4 ± 1.8 | 9.6 ± 0.3  | 11.4 ± 0.2 | 11.8 ± 0.2 | 11.6 ± 0.3 |
| gaussian_noise    | 38.6 ± 4.3 | 16.7 ± 0.4 | 17.2 ± 0.5 | 17.9 ± 0.3 | 16.6 ± 0.5 |
| glass_blur        | 15.1 ± 0.8 | 13.7 ± 0.4 | 15.0 ± 0.2 | 15.7 ± 0.3 | 15.0 ± 0.1 |
| impulse_noise     | 33.7 ± 6.1 | 17.1 ± 0.7 | 18.0 ± 0.3 | 20.1 ± 0.6 | 17.8 ± 0.3 |
| jpeg_compression  | 7.7 ± 0.4  | 14.8 ± 0.5 | 16.0 ± 0.5 | 16.6 ± 0.4 | 16.2 ± 0.3 |
| motion_blur       | 12.3 ± 0.4 | 10.4 ± 0.4 | 12.3 ± 0.1 | 12.8 ± 0.2 | 12.5 ± 0.2 |
| pixelate          | 23.6 ± 1.2 | 11.0 ± 0.4 | 12.5 ± 0.3 | 12.5 ± 0.3 | 12.4 ± 0.2 |
| saturate          | 8.7 ± 0.7  | 9.3 ± 0.3  | 11.1 ± 0.2 | 11.8 ± 0.3 | 11.2 ± 0.3 |
| shot_noise        | 37.8 ± 4.2 | 16.2 ± 0.6 | 16.8 ± 0.8 | 17.4 ± 0.3 | 16.4 ± 0.4 |
| snow              | 8.3 ± 0.4  | 14.0 ± 0.5 | 15.1 ± 0.3 | 14.9 ± 0.3 | 14.7 ± 0.2 |
| spatter           | 6.5 ± 0.9  | 9.5 ± 0.1  | 10.8 ± 0.2 | 11.5 ± 0.2 | 10.7 ± 0.2 |
| speckle_noise     | 34.9 ± 4.8 | 16.7 ± 0.7 | 16.7 ± 0.3 | 18.3 ± 0.6 | 16.6 ± 0.4 |
| zoom_blur         | 10.2 ± 1.3 | 8.9 ± 0.2  | 11.1 ± 0.3 | 11.6 ± 0.2 | 11.2 ± 0.1 |
| Avg               | 18.8 ± 0.8 | 12.3 ± 0.2 | 13.9 ± 0.1 | 14.4 ± 0.1 | 13.6 ± 0.1 |
</details>

---

### CAMELYON-17

#### Few-shot

| Samples vs. Acc  | 5          | 10         | 50         | 500        | All        |
|:-----------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| Source-only      | 54.7 ± 1.5 | 54.7 ± 1.5 | 54.7 ± 1.5 | 54.7 ± 1.5 | 54.7 ± 1.5 |
| AdaBN            | 81.9 ± 2.6 | 83.4 ± 1.7 | 83.9 ± 1.5 | 84.0 ± 1.3 | 84.0 ± 1.2 |
| PL               | 81.9 ± 2.5 | 83.4 ± 1.9 | 83.9 ± 1.5 | 84.9 ± 1.2 | 91.0 ± 0.3 |
| IM               | 82.1 ± 2.6 | 83.6 ± 1.7 | 84.1 ± 1.5 | 86.2 ± 1.1 | 90.0 ± 0.2 |
| FR               | 82.9 ± 2.7 | 85.1 ± 1.9 | 86.6 ± 1.2 | 88.7 ± 1.0 | 89.7 ± 0.7 |
| BUFR             | 83.1 ± 2.8 | 85.0 ± 1.8 | 85.7 ± 1.3 | 88.8 ± 0.8 | 89.8 ± 0.4 |


| Samples vs. ECE | 5          | 10         | 50         | 500        | All        |
|:----------------|:-----------|:-----------|:-----------|:-----------|:-----------|
| Source-only     | 42.1 ± 1.5 | 42.1 ± 1.5 | 42.1 ± 1.5 | 42.1 ± 1.5 | 42.1 ± 1.5 |
| AdaBN           | 15.4 ± 2.5 | 14.0 ± 1.6 | 13.6 ± 1.4 | 13.4 ± 1.2 | 13.4 ± 1.1 |
| PL              | 15.4 ± 2.4 | 14.0 ± 1.7 | 13.7 ± 1.4 | 13.0 ± 1.1 | 8.4 ± 0.3  |
| IM              | 15.3 ± 2.5 | 13.8 ± 1.6 | 13.5 ± 1.4 | 12.0 ± 1.1 | 9.5 ± 0.2  |
| FR              | 14.4 ± 2.5 | 12.6 ± 1.7 | 11.5 ± 1.2 | 10.1 ± 1.0 | 9.4 ± 0.8  |
| BUFR            | 14.3 ± 2.6 | 12.6 ± 1.7 | 12.1 ± 1.2 | 9.7 ± 0.9  | 8.9 ± 0.5  |

---

### MNIST-C

#### Summary (all shifts, all data)

|                   | ACC        | ECE       |
|:------------------|:-----------|:----------|
| No Corruption     | 99.4 ± 0.1 | 0.3 ± 0.1 |
| Source-only       | 84.9 ± 0.8 | 8.1 ± 0.9 |
| AdaBN             | 94.0 ± 0.2 | 4.2 ± 0.2 |
| PL                | 96.4 ± 0.3 | 3.1 ± 0.3 |
| IM                | 97.3 ± 0.4 | 2.4 ± 0.4 |
| SHOT              | 97.8 ± 0.2 | 2.3 ± 0.2 |
| FR                | 97.3 ± 0.3 | 2.1 ± 0.3 |
| BUFR              | 96.8 ± 0.4 | 2.7 ± 0.4 |
| Target Supervised | 99.2 ± 0.0 | 0.5 ± 0.0 |

#### Per-Shift Results
<details>
  <summary>Accuracy</summary>

|               | Src-only   | AdaBN      | PL         | IM         | SHOT       | FR         | BUFR       |
|:--------------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness    | 78.3 ± 6.0 | 99.4 ± 0.1 | 99.4 ± 0.0 | 99.4 ± 0.0 | 99.4 ± 0.0 | 99.2 ± 0.1 | 99.0 ± 0.1 |
| canny_edges   | 72.1 ± 0.9 | 90.4 ± 0.6 | 96.7 ± 0.3 | 98.0 ± 0.1 | 98.4 ± 0.0 | 98.1 ± 0.1 | 98.4 ± 0.1 |
| dotted_line   | 98.6 ± 0.2 | 98.8 ± 0.1 | 99.2 ± 0.1 | 99.4 ± 0.1 | 99.3 ± 0.0 | 99.1 ± 0.1 | 99.0 ± 0.1 |
| fog           | 20.8 ± 3.4 | 92.9 ± 1.5 | 99.2 ± 0.1 | 99.4 ± 0.1 | 99.4 ± 0.0 | 99.2 ± 0.1 | 99.1 ± 0.1 |
| glass_blur    | 86.3 ± 1.1 | 95.5 ± 0.5 | 97.7 ± 0.1 | 98.2 ± 0.1 | 98.3 ± 0.1 | 97.7 ± 0.1 | 97.7 ± 0.1 |
| impulse_noise | 95.5 ± 0.6 | 97.9 ± 0.1 | 98.4 ± 0.1 | 98.7 ± 0.1 | 98.7 ± 0.1 | 98.4 ± 0.1 | 98.6 ± 0.1 |
| motion_blur   | 81.0 ± 3.0 | 96.4 ± 0.9 | 98.7 ± 0.1 | 99.1 ± 0.0 | 99.1 ± 0.1 | 98.6 ± 0.1 | 98.7 ± 0.1 |
| rotate        | 96.7 ± 0.2 | 96.8 ± 0.2 | 97.7 ± 0.2 | 98.5 ± 0.1 | 98.5 ± 0.1 | 98.1 ± 0.1 | 97.8 ± 0.1 |
| scale         | 97.1 ± 0.2 | 97.2 ± 0.1 | 98.6 ± 0.1 | 99.0 ± 0.0 | 99.2 ± 0.0 | 98.5 ± 0.2 | 98.4 ± 0.1 |
| shear         | 98.8 ± 0.1 | 98.9 ± 0.0 | 99.0 ± 0.1 | 99.1 ± 0.0 | 99.1 ± 0.0 | 98.8 ± 0.1 | 98.6 ± 0.1 |
| shot_noise    | 98.6 ± 0.0 | 98.9 ± 0.1 | 99.1 ± 0.1 | 99.2 ± 0.0 | 99.1 ± 0.0 | 98.9 ± 0.1 | 98.8 ± 0.1 |
| spatter       | 98.6 ± 0.1 | 98.6 ± 0.1 | 99.0 ± 0.1 | 99.1 ± 0.1 | 99.1 ± 0.1 | 98.7 ± 0.1 | 98.6 ± 0.1 |
| stripe        | 92.7 ± 0.9 | 90.3 ± 1.5 | 94.8 ± 3.4 | 99.2 ± 0.1 | 99.3 ± 0.1 | 98.7 ± 0.1 | 98.9 ± 0.1 |
| translate     | 65.6 ± 0.7 | 64.9 ± 0.5 | 70.5 ± 1.4 | 73.9 ± 6.3 | 81.1 ± 3.0 | 79.2 ± 4.7 | 71.3 ± 5.6 |
| zigzag        | 92.1 ± 0.8 | 93.3 ± 0.7 | 97.9 ± 0.9 | 98.9 ± 0.1 | 99.1 ± 0.0 | 98.5 ± 0.1 | 98.7 ± 0.2 |
| Avg           | 84.9 ± 0.8 | 94.0 ± 0.2 | 96.4 ± 0.3 | 97.3 ± 0.4 | 97.8 ± 0.2 | 97.3 ± 0.3 | 96.8 ± 0.4 |
| Avg \\trans   | 86.2 ± 0.9 | 96.1 ± 0.2 | 98.2 ± 0.3 | 98.9 ± 0.0 | 99.0 ± 0.0 | 98.6 ± 0.0 | 98.6 ± 0.1 |
</details>

<details>
  <summary>ECE</summary>

|               | Src-only    | AdaBN      | PL         | IM         | SHOT       | FR         | BUFR       |
|:--------------|:------------|:-----------|:-----------|:-----------|:-----------|:-----------|:-----------|
| brightness    | 3.5 ± 1.1   | 0.3 ± 0.0  | 0.4 ± 0.0  | 0.4 ± 0.0  | 1.5 ± 0.0  | 0.5 ± 0.1  | 0.6 ± 0.1  |
| canny_edges   | 22.5 ± 0.7  | 6.6 ± 0.5  | 2.7 ± 0.3  | 1.5 ± 0.1  | 1.1 ± 0.1  | 1.4 ± 0.1  | 1.1 ± 0.1  |
| dotted_line   | 0.6 ± 0.1   | 0.6 ± 0.1  | 0.5 ± 0.1  | 0.4 ± 0.1  | 1.5 ± 0.0  | 0.6 ± 0.1  | 0.7 ± 0.1  |
| fog           | 34.4 ± 11.6 | 4.2 ± 1.1  | 0.6 ± 0.1  | 0.4 ± 0.1  | 1.7 ± 0.1  | 0.6 ± 0.1  | 0.6 ± 0.1  |
| glass_blur    | 8.0 ± 0.9   | 2.9 ± 0.4  | 1.8 ± 0.1  | 1.4 ± 0.1  | 1.1 ± 0.1  | 1.7 ± 0.1  | 1.7 ± 0.1  |
| impulse_noise | 1.1 ± 0.2   | 1.1 ± 0.0  | 1.1 ± 0.0  | 0.9 ± 0.1  | 1.4 ± 0.1  | 1.1 ± 0.1  | 1.0 ± 0.1  |
| motion_blur   | 13.2 ± 2.9  | 1.8 ± 0.5  | 0.9 ± 0.0  | 0.7 ± 0.1  | 1.3 ± 0.1  | 1.0 ± 0.1  | 0.9 ± 0.0  |
| rotate        | 2.0 ± 0.1   | 2.1 ± 0.1  | 1.8 ± 0.1  | 1.2 ± 0.1  | 1.2 ± 0.0  | 1.3 ± 0.1  | 1.6 ± 0.1  |
| scale         | 1.1 ± 0.2   | 1.7 ± 0.1  | 1.1 ± 0.0  | 0.7 ± 0.1  | 1.4 ± 0.1  | 1.0 ± 0.2  | 1.0 ± 0.1  |
| shear         | 0.7 ± 0.1   | 0.7 ± 0.0  | 0.8 ± 0.1  | 0.7 ± 0.0  | 1.4 ± 0.1  | 0.8 ± 0.1  | 1.0 ± 0.1  |
| shot_noise    | 0.8 ± 0.1   | 0.6 ± 0.1  | 0.6 ± 0.0  | 0.6 ± 0.1  | 1.5 ± 0.1  | 0.7 ± 0.0  | 0.8 ± 0.0  |
| spatter       | 0.6 ± 0.1   | 0.7 ± 0.1  | 0.7 ± 0.0  | 0.6 ± 0.1  | 1.5 ± 0.1  | 0.8 ± 0.1  | 1.0 ± 0.1  |
| stripe        | 3.2 ± 0.9   | 7.1 ± 1.4  | 4.6 ± 3.4  | 0.6 ± 0.1  | 1.5 ± 0.1  | 0.9 ± 0.1  | 0.7 ± 0.1  |
| translate     | 24.4 ± 0.8  | 28.0 ± 0.6 | 27.7 ± 1.4 | 25.3 ± 6.3 | 14.5 ± 2.8 | 17.4 ± 4.1 | 27.1 ± 5.6 |
| zigzag        | 5.1 ± 0.6   | 4.6 ± 0.6  | 1.6 ± 0.9  | 0.8 ± 0.0  | 1.5 ± 0.0  | 1.1 ± 0.1  | 0.8 ± 0.1  |
| Avg           | 8.1 ± 0.9   | 4.2 ± 0.2  | 3.1 ± 0.3  | 2.4 ± 0.4  | 2.3 ± 0.2  | 2.1 ± 0.3  | 2.7 ± 0.4  |
| Avg \\trans   | 6.9 ± 1.0   | 2.5 ± 0.2  | 1.4 ± 0.3  | 0.8 ± 0.0  | 1.4 ± 0.0  | 1.0 ± 0.0  | 1.0 ± 0.0  |
</details>
